import './landing.scss';
import { drawOnCanvas } from '../components/frames/frame';

function animate(draw, imgDataURIArr) {
  if (imgDataURIArr.length === 0) return;
  let start = performance.now();
  let i = 0;
  let timeFraction = 0;
  let prev = timeFraction;
  requestAnimationFrame(function animateFrame(time) {
    let duration = 1000 / 4;
    prev = timeFraction;
    timeFraction = Math.abs(Math.floor((time - start) / duration));
    if (timeFraction !== prev) {
      draw(i); // draw frame
      i++;
      i %= imgDataURIArr.length;
    }
    if (timeFraction >= 0) {
      requestAnimationFrame(animateFrame);
    }
  });
}

const megaMan = [
  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAC0CAYAAADRuGMkAAAD6ElEQVR4nO3awXHcMBBFQYatqxNzHA5FNzsCfi9RI4ADdFfhKi4H8/Yg6boAAAAAAAAAAAAA2MLf4gNbEQgEAoFAIBAIBAKBcIzSZf/1++/jE34eLCcQCAQCgUAgEAgEAoFAIHDdLeHXd+2ZE454KCcQCAQCgUAgEAgEAuF49wtVHUJROD9w4JZAIBAIBAKBQCAQCAQCgUDQMpChv5E8fw4IJDwHBBKeAwIJzwGBhOeAQMJzOMjjRVseyGA8t0cgBAIRCIFABEIgEIEQCEQgBAIRCIFABHKMsQWZEMj3n68pp/KzhfnQlEAEQiAQgRAIRCAEAhEIgUAEcozSpb5d9sJAZkUwLTaBvJpABEIgEIEQCEQgBAIRCIFABMJVuOyV5+5zXdc1FEj8eYVn0vOrzZpPSwIRiEACgQhEIIFABCKQQCACEUggEIEIJBCIQI4P5PGy7RZIxxNnUHkG/gP59jQNSiANz4dLJJACAml4PlwigRQQSMPz4RIJpIBAGp4Pl0ggBQTS8Hy4RAIpMGU4IwtfGk/4bKuXsDKEWV84s770hj5zMYEIRCCBQAQikEAgAhFIIBCBCCQQiEAEEghEIAIJpgQy9JxJS/Dmv2lUL2JVIOWnaDcugQhEIAIRiEAEMjoEgQgkfuZiAhGIQAKBCEQgg+qGVnkJxQsVP9uEMyOCVwRSO7dXEIhABBIIRCACCQQiEIEEAhGIQAKBCEQggUAEIpABcwY6KZDVJ85zzhm764MW/imBCEQggUAEIpBAIAIRSCAQgQgkEIhABDKoLpyNIvhPCBxEIAIhEIhACAQiEAKBCIRAIAIhEIhAGJAWpCyqF0cgBCKBQCAQCAQCgUAgEAgMKgtk+REIP0AgEAgEAoFAIBAIBAKBQDje7eLc/k1h9bKH4+8gVBMIBAKBQCAQCAQCgcD1MIKh/5hdHMEP/KcvBxGIQAgEIhACgQiEQCACIRCIQI53f9mTlm1gCR//mnlavH41vB2BCIRAIAIhEIhACAQiEAKBCIRAIAI5xvOlGlmCcIojqJtB8XsKpCeBCIRAIAIhEIhACAQiEAKBCOQYy5d90uLMmdvcEJ4eBgikcm4C2Y5AKucmkO0IpHJuAtmOQCrnJpDtCKRybgLZjkAq5yaQtvot+/oQen5JrP/yaGmfixbIm2fW1j4XLZA3z6ytfS5aIG+eWVv7XLRA3jyztva5aIG8eWZtpQHtdCqtfpeOM2tr9SV0vOzV79JxZm2tvoSOl736XTrOrK3Vl9Dxsle/S8eZtbX6Ejpe9up36TiztlZfQsfLXv0uHWfW1upL6HjZq9+l48wAAAAAAAAAAAA41D/9oZgCPpNu3wAAAABJRU5ErkJggg==',
  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAC0CAYAAADRuGMkAAAD5klEQVR4nO3awXHcMBBFQYatqxNzHA5FNzkB87uImgU4QHcVjhaXg3l7kHxdAAAAAAAAAAAAAGzhp/jAVgQCgUAgEAgEAoFAIByjdNl//f55fMLPg+UEAoFAIBAIBAKBQCAQCASuuyX8+q49c8IRD+UEAoFAIBAIBAKBQCAc736hqkMoCucDB24JBAKBQCAQCAQCgUAgEAgELQMZ+hvJ8+eAQMJzQCDhOSCQ8BwQSHgOCCQ8h4M8XrTlgQzGc3sEQiAQgRAIRCAEAhEIgUAEQiAQgRAIRCDHGFuQCYF8//n69/n+Lj1Dn+3uZwlkOwIRCIFABEIgEIEQCEQgBAIRyDFKl/p22QsDuY1gMISRGdw9P/4bgbQkEIEQCEQgBAIRCIFABEIgEIFwFS575bn7XNd1CWTSDnzgtCQQgQgkEIhABBIIRCACCQQiEIEEAhGIQAKBCOT4QB4v23aBFIYTz8hzBqIqPTfzHDpNgxKIQAQSCEQgAgkEIhCBBAIRiEACgQhEIMGU4YwsfGk84bOtXsIU6dOfNesLZ9aX3tBnLiYQgQgkEIhABBIIRCACCQQiEIEEAhGIQAKBCEQgwZRAhp4zaQmG/kZSeNJnq17EqkDKT9FuXAIRiEAEIhCBCGR0CAIRSPzMxQQiEIEEAhGIQAbVDa3yEooXKn62CWdGBK8IpHZuryAQgQgkEIhABBIIRCACCQQiEIEEAhGIQAKBCEQgA+YMdFIgq0+c55wzdtcHLfxTAhGIQAKBCEQggUAEIpBAIAIRSCAQgQhkUF04G0XwnxA4iEAEQiAQgRAIRCAEAhEIgUAEQiAQgTAgLUhZVC+OQAhEAoFAIBAIBAKBQCAQGFQWyPIjED5AIBAIBAKBQCAQCAQCgUA43u3i3P5NYfWyh+PvIFQTCAQCgUAgEAgEAoHA9TCCof8xuziCD/xPXw4iEIEQCEQgBAIRCIFABEIgEIEc7/6yJy3bwBI+/jXztHj9ang7AhEIgUAEQiAQgRAIRCAEAhEIgUAEcoznSzWyBOEUR1A3g+L3FEhPAhEIgUAEQiAQgRAIRCAEAhHIMZYv+6TFmTO3uSE8PQwQSOXcBLIdgVTOTSDbEUjl3ASyHYFUzk0g2xFI5dwEsh2BVM5NIG31W/b1IfT8klj/5dHSPhctkDfPrK19Llogb55ZW/tctEDePLO29rlogbx5Zm3tc9ECefPM2koD2ulUWv0uHWfW1upL6HjZq9+l48zaWn0JHS979bt0nFlbqy+h42WvfpeOM2tr9SV0vOzV79JxZm2tvoSOl736XTrOrK3Vl9Dxsle/S8eZAQAAAAAAAAAAcKi//EoW6J4yb2QAAAAASUVORK5CYII=',
  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAC0CAYAAADRuGMkAAAD4klEQVR4nO3awbEaMRBF0Qn7b52Y43Ao7OwI9CjkRprWnFOlpYFp9WVh/nUBAAAAAAAAAAAA0MrfwgPHEQgEAoFAIBAIBAKB8Bhly/7r99+Pz5vXhO0EAoFAIBAIBAKBQCAQCITHGy/hz6vurIsHSgkEAoFAIBAIBAKBQOBaEcEX4ik+MCQQCAQCgUAgEAgEAoFAIBC0C2Tq95G5EEEgwxnAJRCBEAlEIAQCEQiBQATC9eGybY9jbqHHRyC8IRCBEAhEIAQCEQiBQARCIBCBEAhEII8xtyRfDuT152d8Xq+yM/XZ0usJ5DgCEQiBQARCIBCBEAhEIAQCEchjlC11/GvWwkAqI5h5/hTi8N8IpC2BCIRAIAIhEIhACAQiEAKBCOTxSpe98gw/m0CqA5l61onTkkAEIpBAIAIRSCAQgQgkEIhABBIIRCACCQQiEIFcE8t2VCDpTMQzPDPvMxFV6QnznDpNoxKIQAQSCEQgAgkEIhCBBAIRiEACgQhEIMGS4Xy87Nfn/50cBzoRTny9wlP5/qu+cJZ84YXnCf+mnEAEIpBAIAIRSCAQgQgkEIhABBIIRCACCQQiEIEESwKZep8FSzD1+0jxqXzOVYEs2Y30GQQiEIEIRCACEYhABCIQgQhEIAIRyPMCGakd3ILXKl2OhWdVCNsDqZ3bdgIRiEACgQhEIIFABCKQQCACEUggEIEIJBCIQAQyac1AFwRyhzOc57rz2T2ve/+2BCIQgQQCEYhAAoEIRCCBQAQikEAgAhHIhPEQHh5CnA2PIRCBEAhEIAQCEQiBQARCIBCBEAhEIEx6tyT/HdXuCN6EAJFAIBAIBAKBQCAQCAQmlAVyiyMQigkEAoFAIBAIBAKBQCAQCFyDxYm/Kexe9sHxOwjfIBAIBAKBQCAQCAQC4fGGC1L6F7M3CKHwr3zF8yACEQiBQARCIBCBEAhEIAQCEQjX6KIXLdvkEn493Ol4hXMcgQiEQCACIRCIQAgEIhACgQiEQCACebzPF25mOQqjevP56mZQ/JwT4YjnBgQiEAKBCIRAIAIhEIhACAQikMfYvuyLFmfN3NaG8OlhgkAq5yaQ4wikcm4COY5AKucmkOMIpHJuAjmOQCrnJpDjCKRybgJpq9+y7w+h55fE/i+Pls65aIHceWZtnXPRArnzzNo656IFcueZtXXORQvkzjNr65yLFsidZ9ZWGtBJp9LuZ+k4s7Z2X0LHy979LB1n1tbuS+h42bufpePM2tp9CR0ve/ezdJxZW7svoeNl736WjjNra/cldLzs3c/ScWZt7b6Ejpe9+1k6zgwAAAAAAAAAAICH+gfNFow5ui98vgAAAABJRU5ErkJggg==',
];

const canvasMain = document.querySelector('.canvas-main');

animate(i => {
  drawOnCanvas(canvasMain, megaMan[i]);
}, megaMan);
